{% extends 'publico/dashboards/dashboards_base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block style %}
<link href="{% static 'css/cadastroProduto.css' %}" rel="stylesheet" type="text/css">
{% endblock %}
{% block base %}

    
<form method="POST" class="post-form">
     {% csrf_token %}
     <h1 class="h2">Listagem de Produtos<br></h1>
     <div class="form-row">
    
     <div class="form-group col-md-4">

         <input id = 'buscar'name='buscar' type="search" class="form-control ds-input" style="width: 130%"placeholder="Buscar...">
     </div>

    
   

 </div>
</form>  
     <div class="form-group col-md-4">
          <a href="{% url 'cadastrar_produtos' %}">
          <button class="btn btn-primary" style="width: 35%; margin-left: -36%; margin-top: 9.3%; height: 40%;">Cadastrar Produto</button>
     </a>
     </div>
    <div class="table-responsive-sm"style="margin-left: 37%; margin-top: -7%;">
    <table class="table table" style="width: 160%; margin-left: -40%;  margin-top: 12%;">
        <thead>
        <tr>
            <th scope="col">ID Produto</th>
            <th scope="col">Nome</th>
            <th scope="col">Categoria</th>
            <th scope="col">Cor</th>
            <th scope="col">Tamanho em cm</th>
            <th scope="col">Preço em R$</th>
            <th scope="col">Alterar/Remover</th>
        </tr>
        </thead>
        <tbody>
        {% for p in produtos %}
          <tr>
            <th scope="row">{{p.id}}</th>
            <td>{{p.nome}}</td>
            <td>{{p.categoria}}</td>
            <td>{{p.cor}}</td>
            <td>{{p.tamanho_em_cm}}</td>
            <td>{{p.preco}}</td>
            <td>
                <a href="{% url 'editar_produto' p.pk %}">
                <button type="button" class="btn btn-primary" >
                    <i class="fas fa-edit"></i>
                </button>
                    </a>
                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#excluirProduto{{us.pk}}">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
        <tr>


                                   <!-- Modal Excluir Produto-->
          <div class="modal fade" id="excluirProduto{{us.pk}}" tabindex="-1" role="dialog" aria-labelledby="excluirProdutoTitulo" aria-hidden="true">
               <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                         <div class="modal-header">
                              <h5 class="modal-title" id="excluirProdutoTitulo">Deseja excluir o produto?</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                              </button>
                         </div>

                         <div class="modal-footer">
                              <a class="btn btn-success" href="{% url 'excluir_produto' p.pk %}" role="button">Sim</a>
                              <button type="button" class="btn btn-danger" data-dismiss="modal">Não</button>
                              
                         </div>
                    </div>
               </div>
          </div>


        {% endfor %}
        </tbody>
    </table>




        <!-- Modal Excluir Produto-->
          <div class="modal fade" id="excluirProduto" tabindex="-1" role="dialog" aria-labelledby="excluirProdutoTiltulo" aria-hidden="true">
               <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                         <div class="modal-header">
                              <h5 class="modal-title" id="excluirProdutoTiltulo">Deseja excluir o produto?</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                              </button>
                         </div>

                         <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Não</button>
                              <button type="button" class="btn btn-primary">Sim</button>
                         </div>
                    </div>
               </div>
          </div>
    </div>

    {% endblock %}